<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "./mybatis-3-mapper.dtd">
<mapper namespace="ItripHotelRoom">
    <!-- 用户分页查询条件 -->
    <sql id="whereClauseGetItripHotelRoomPage">
        <where>
            <if test="isHavingBreakfast != null and isHavingBreakfast  != ''">
                and table1.isHavingBreakfast=#{isHavingBreakfast}
            </if>
            <if test="isTimelyResponse != null and isTimelyResponse  != ''">
                and table1.isTimelyResponse=#{isTimelyResponse}
            </if>
            <if test="isCancel != null and isCancel  != ''">
                and table1.isCancel=#{isCancel}
            </if>
            <if test="isBook != null and isBook  != ''">
                and table1.isBook=#{isBook}
            </if>
            <if test="roomBedTypeId != null and roomBedTypeId  != ''">
                and table1.roomBedTypeId=#{roomBedTypeId}
            </if>
            <if test="payType != null and payType  != ''">
                and table1.payType=#{payType}
            </if>
        </where>
    </sql>

    <!-- 获取用户列表 -->
    <select id="getItripHotelRoomCount" resultType="java.lang.Integer">
        select count(*) from itrip_hotel_room as table1
        <include refid="whereClauseGetItripHotelRoomPage"></include>
    </select>

    <!-- 获取用户列表 分页-->
    <select id="getItripHotelRoomPage" resultType="cn.itrip.beans.vo.ItripHotelRoomVo" parameterType="map">
        SELECT
            table1.id AS id,
            table1.hotelId AS hotelId,
            table1.roomTitle AS roomTitle,
            table1.roomPrice AS roomPrice,
            table1.roomBedTypeId AS roomBedTypeId,
            table1.isHavingBreakfast AS isHavingBreakfast,
            table1.payType AS payType,
            table1.satisfaction AS satisfaction,
            table1.isBook AS isBook,
            table1.isCancel AS isCancel,
            table1.isTimelyResponse AS isTimelyResponse,
            table1.creationDate AS creationDate,
            table1.createdBy AS createdBy,
            table1.modifyDate AS modifyDate,
            table1.modifiedBy AS modifiedBy,
            ild.`name` AS roomBedTypeName
        FROM
            itrip_hotel_room table1
        LEFT JOIN itrip_label_dic ild ON table1.roomBedTypeId = ild.id
        <include refid="whereClauseGetItripHotelRoomPage"></include>
        order by table1.creationDate desc
    </select>
</mapper>